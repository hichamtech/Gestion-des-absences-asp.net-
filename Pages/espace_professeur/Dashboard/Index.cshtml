
@page
@model ProjetAspCore.Page.DashboardModel
@{
}


<!-- Vue Gloable -->
<div class="panel panel-headline">
	<div class="panel-heading">
		<h3 class="panel-title">Vue Globale</h3>
		<p class="panel-subtitle"></p>
	</div>
	<div class="panel-body">
		<div class="row">
			<div class="col-md-3">
				<div class="metric">
					<span class="icon"><i class="fas fa-book-reader"></i></span>
						<p>
                            <span class="number">@Model.nbr_matiere</span>
							<span class="title">Matires</span>
						</p>
				</div>
				</div>
				<div class="col-md-3">
					<div class="metric">
						<span class="icon"><i class="fas fa-chalkboard-teacher"></i></span>
							<p>
						<span class="number">@Model.nbr_seance</span>
						<span class="title">Seances</span>
						</p>
						</div>
				</div>
			</div>		
	</div>
</div>
				<!-- END Vue Gloable -->
<div class="row">
	<div class="col-md-6">
			<!-- PANEL Matires-->
		<div class="panel">
			<div class="panel-heading">
				<h3 class="panel-title">Mes matières</h3>
			<div class="right">
				<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
			</div>
			</div>
			<div class="panel-body">
                <table class="table table-hover">
										<thead>
											<tr>
												<th>#</th>
												<th>Libele Matière</th>
												<th>Nombre Heures</th>
												<th>Filière</th>
                                                <th>Taux absence </th>
											</tr>
										</thead>
										<tbody>
                                            @foreach (var item in Model.Matiere)
{                                       
                                            var nbrabs = item.Seances.Select(a => a.Abscences).Count();
                                            var nbrh = item.nbr_heures;
                                           // var taux =  String.Format("{0:P0}",(nbrabs/nbrh)*100 );
											<tr>
												<td>#</td>
												<td>@item.libele_matiere</td>
												<td>@item.nbr_heures</td>
												<td>@item.Filiere.libele_filiere</td>
                                                <td>@( (Model.nbr_abs * 100)/item.nbr_heures)%</td>
											</tr>
}


											
										</tbody>
									</table>
								</div>
							</div>
							<!-- END PANEL Matires -->
							
</div>


<div class="col-md-6">
			<!-- PANEL Matires-->
		<div class="panel">
			<div class="panel-heading">
				<h3 class="panel-title">Mes Seances</h3>
			<div class="right">
				<button type="button" class="btn-toggle-collapse"><i class="lnr lnr-chevron-up"></i></button>
			</div>
			</div>
			<div class="panel-body">
                <table class="table table-hover">
										<thead>
											<tr>
												
												<th>Libele Seance</th>
												<th>Date Debut</th>
												<th>Date Fin</th>
                                                <th>Matiere </th>
												<th>Salle</th>
												<th>Action</th>
											</tr>
										</thead>
										<tbody>
                                            @foreach (var item in Model.Seances)
{                                       
                                           
											<tr>
													
												<td>@item.libele_seance</td>
												<td>@item.date_debut</td>
												<td>@item.date_fin</td>
                                                <td>@item.Matiere.libele_matiere</td>
												 <td>@item.Salle.numero_salle</td>
												        <td>
                                        
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <a class="btn btn-primary" asp-page="./Details" asp-route-id="@item.code_seance">Details</a>
                                                </div>
                                            </div>
                                        </td>
											</tr>
											
}
											
										</tbody>
									</table>
								</div>
							</div>
</div>						<!-- END PANEL Matires -->
</div>	
@*				
<div class="row">
	<div class="col-md-6">
		<!-- PANEL  presence -->
		<div id="panel-scrolling-demo" class="panel">
				<div class="panel-heading">
					<h3 class="panel-title">Liste Présence</h3>
				</div>
				
		<div class="panel-body">
			    <table class="table table-hover">
										<thead>
											<tr>
												
												<th>Date </th>
												<th>Nom Etudiant</th>
												<th>Matiere</th>
											</tr>
										</thead>
										<tbody>
                                            @foreach (var item in Model.Abscence)

{                                       
                                        
											<tr>
												<td>@item.date_abs</td>
												<td>@item.etudiant.nom </td>
												<td>@item.seance.Matiere.libele_matiere</td>
												
											</tr>
}	
										</tbody>
									</table>
		</div>
	</div>
							<!-- End  PANEL  presence-->

	</div>

<div class="col-md-6">
		<!-- PANEL  absence -->
		<div id="panel-scrolling-demo" class="panel">
				<div class="panel-heading">
					<h3 class="panel-title">Liste Abscences</h3>
				</div>
<div class="panel-body">
			    <table class="table table-hover">
										<thead>
											<tr>
												
												<th>Date Absence</th>
												<th>Nom Etudiant</th>
												<th>Matiere</th>
                                                <th>Nombre Absence Etudiant </th>
											</tr>
										</thead>
										<tbody>
                                            @foreach (var item in Model.Etudiants)

{                                       
                                        
											<tr>
												<td>@item.Filiere.Matieres.FirstOrDefault().Seances.FirstOrDefault().date_debut.Date</td>
												<td>@item.FullName</td>
												<td>@item.Filiere.Matieres.FirstOrDefault().libele_matiere</td>
												<td>@( @item.Filiere.Matieres.Select(e => e.Seances).Count() -  @item.Abscences.Count () )</td>
												
											</tr>
}
	
										</tbody>
							</table>
		</div>
	</div>
							<!-- END PANEL Absence -->
</div>							
*@

  

